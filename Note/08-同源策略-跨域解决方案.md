什么是同源策略？

为什么同源策略会产生跨域？

什么时跨域？

---

使用 xhr / fetch 演示跨域问题。

用 liveserver 开启的服务，在 127.0.0.1:5500 上

---

跨域解决方案总结

几乎所有的跨域解决方案，都和服务器有关。

---

方案一：

1.将静态资源和 api 服务器，部署在同一个服务器中。

安装 koa-static，将 html 文件作为静态资源。

- 同样的，静态资源相对路径，相对于项目启动路径。

---

方案二：

CORS

简单请求的情况下：

- 在服务器开启 CORS，在响应头中设置

非简单请求的情况，

- 需要设置更多响应头。



着是一劳永逸的方案，无论是 Java/Go/Node 开发的服务器，开启了 CORS，

前端既不需要 Node 代理，也不需要反向代理，直接就可以跨域访问资源。

但是这么左安全性有隐患。

所以，一般在开发阶段，采用方案三，部署后采用方案四。

---

方案三：

Node 代理服务器。

安装插件 http-proxy-middleware

最终要解决跨域，本质上也要用到方案一或方案二。



webpack 启动项目时，配置代理，本质上就是这个原理。

一般在开发阶段，使用该方案。

---

方案四：

Nginx反向代理，

在 Windows 中，下载 Nginx；

双击运行，查看是否运行了 Nginx

- 查看任务管理器
- 访问 `localhost:80` / `localhost` 端口

本质上也是开启 CORS

找到 conf/nginx.conf 文件，进行配置。

修改 nginx 配置后，要重启服务。

- 在任务管理器中，重启 Nginx

- 或在 nginx 目录打开命令行终端，推荐 git bash

  ```shell
  ./nginx.exe -s reload
  ```

  



一般在项目部署后，使用该方案。

---

